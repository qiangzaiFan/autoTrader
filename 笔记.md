# Python量化交易

## 量化科普

### 科普

1. 互联网金融开发所需的工作
   - 确认市场需求
   - 开发交易策略，搭建数据分析模型，所谓的交易策略就是量化交易，如何利用数据去
     搭建一个让你赚钱的模型或者方法，通过买入或者卖出一支股票去赚取这个价差，这个买入
     卖出的点位就是模型告诉我的，这个就是量化交易的简单过程。
2. 以基金举例
   - 基金是一个投资组合，它里面包括基金由股票、债券（国债、企业债等等一些可以交易的债券）、其他 组成。
3. 目录部分
   - 策略由它的时效性，比如很多国家的货币宽松政策，比如把钱借给企业，放入股市等，不一定每年都会这样，需要我们数据回测与优化，找到能赚最多钱的那部分。
     - ![image-20220424083332879](%E7%AC%94%E8%AE%B0.assets/image-20220424083332879.png)



### 什么是量化

#### 量化定义

- ![image-20220424105156106](%E7%AC%94%E8%AE%B0.assets/image-20220424105156106.png)
- 

#### 有哪些量化策略

- 量化策略各种各样，每个人认为他的赚钱“因子”都是不同的。

- 

  - ![image-20220424105915458](%E7%AC%94%E8%AE%B0.assets/image-20220424105915458.png)

  - 
    - ![image-20220424105945030](%E7%AC%94%E8%AE%B0.assets/image-20220424105945030.png)



### 有哪些常用的股票量化指标 （数据面）

1. 相关平台
   - [东方财富官网](https://www.eastmoney.com/),以常用的是东方财富网站为例，数据比较丰富，各种各样的数据类型比较多。
     - ![image-20220424110222869](%E7%AC%94%E8%AE%B0.assets/image-20220424110222869.png)
     - 
2. 东方财富网站使用
   1. 这边有个行情中心，点开这边的个股，
      - ![image-20220424111225476](%E7%AC%94%E8%AE%B0.assets/image-20220424111225476.png)
   2. 查看综合版面，有行情、上证指数、深成指数代表整个市场行情，一些常用指标，比较龙头的企业，
      - <img src="%E7%AC%94%E8%AE%B0.assets/image-20220424111530251.png" alt="image-20220424111530251" style="zoom:25%;" />
   3. 随便点开一只股，看一下详情信息，详情信息布局都一样
      - K线的全屏
        - ![image-20220424112316556](%E7%AC%94%E8%AE%B0.assets/image-20220424112316556.png)
          - RSI KDJ等这些指标都是近10日或者多少日的均价算出来的，
      - 财务数据的部分， ROE 加权净资产收益率，
        - ![image-20220424112453864](%E7%AC%94%E8%AE%B0.assets/image-20220424112453864.png)
          - BOLL线，分为上中下三轨，中轨是怎么计算的，就是计算近N天的一个均值，也可以理解为近N天的一个成本价，这个成本价取的是收盘价来算的，正常情况下取20天的均线来算的，长一点的可以是200天的均线等等，这个取决于自己的趋势性，到底是短期还是长期。上轨怎么算：就是中轨加上2倍的标准差，标准差可以理解为一个股票近多少天的波动幅度，波动幅度越大，这个标准差就越大，一份数据，这个数据里面有好多个点，它找的是这个数据的离散程度。离散程度越大，就是每个点差异越大，那么它的标准差就越大。下跪计算：是类似的，它是中轨减去2倍的标准差。而上下轨最中间的空间代表着股票的常规活动空间，所以当我们用boll去做择时的时候，我们怎么用？首先最基本的股票逻辑还是低买高卖，当股票跌破它常规的一个低价，当它的K线跌破下轨的时候买入，突破上轨的时候卖出。bull线就是帮助我们找到买入点和卖出点，这个就是bull线的作用。
            - ![image-20220424113901977](%E7%AC%94%E8%AE%B0.assets/image-20220424113901977.png)
            - 低买高卖
              - ![image-20220424114240801](%E7%AC%94%E8%AE%B0.assets/image-20220424114240801.png)
            - 连续突破上轨的情况，它还会继续往上涨，从它上涨到回落再到向下突破上轨，这段价差就没吃到，那怎么办？两种解决方式：看看有没有其他指标帮助我们分析，看看突破到131的时候是卖还是不卖？MACD，假设MACD的灰色快移动均线是超过慢移动均线，也是属于向上突破过程中， 假设他们两个，跟上面的上轨一样，都是向上突破，就选择不卖。如果MACD并没有这样的一个表现，那我就卖。第二种方式，就是那一段连续突破我就不管了，我就吃到到第一段突破到上轨的趋势就行。有一点一定要记得：市场是一直在变化的，而交易也一直在发展中，一个策略不可能永远有效，或者说永远的能让你赚大钱，这些都需要我们不断的观察、优化，以上就是一个关于BULL技术指标的分享。
              - ![image-20220424114511101](%E7%AC%94%E8%AE%B0.assets/image-20220424114511101.png)
              - ![image-20220424115036785](%E7%AC%94%E8%AE%B0.assets/image-20220424115036785.png)
              - ![image-20220424123311972](%E7%AC%94%E8%AE%B0.assets/image-20220424123311972.png)
              - MACD的快移动均线、慢移动均线
                - 
              - 
            - 
   4. 
   5. 
3. 



### 财务指标 （基本面）

#### 净利润等

1. 按F10可以出现，上市公司，他每年每个季度必须对外提供企业的财务情况，业务发展等情况，方便投资者了解自己的投资，一般在4月前每个公司都会发布所有的年报。这是规定，
   - 公司全部情况的一个档案文件夹，找财务分析
     - ![image-20220424155809661](%E7%AC%94%E8%AE%B0.assets/image-20220424155809661.png)
   - 点击财务分析，会出现历年每一个季度的财务信息
     - 按报告期如果是06月的话，是两个季度的（半年报），按单季度的话，它就是一个个季度，季度报正常都在每个季度结算期后一个月左右发布出来。
       - ![image-20220424160728546](%E7%AC%94%E8%AE%B0.assets/image-20220424160728546.png)
   - 



#### 交易所和巨潮资讯

查找股票对应公司的财务信息，可以通过交易所或者巨潮资讯（这个是一个汇总平台）。

上面所有的财务信息，都可以在交易所找到，比如五粮液，000858 是00开头的，深股通，深圳上市，去深证交易所。

1. 接触到的交易所地址
   - [深圳证券交易所](https://www.szse.cn/index/index.html)
   - [巨潮资讯](http://www.cninfo.com.cn/new/index)
     - 查看对应公司财务信息，找季度报、半年报、年报、股权变动等信息
       - ![image-20220424161925365](%E7%AC%94%E8%AE%B0.assets/image-20220424161925365.png)
         - 可以查看一些信息，最重要的是财务报告，所有二手的数据都是从公司年报来的，你后面看到的信息，你可以知道它的源数据是从哪里来的。因为错误的数据就会导致错误的结果，这个就是关于基础的数据，财务方面的介绍。任何策略不是说你做了基本面，就不用做技术面，不是这样的，对职业的量化交易者来说，什么策略都要学，都要实现，尤其对那些做私募量化那些人，一定是并行来做的，哪边有用，就用哪个，不断更新迭代，保证库里的数据是有效的，怎么用财务数据进行选股？ 
         - ![image-20220424212142269](%E7%AC%94%E8%AE%B0.assets/image-20220424212142269.png)
       - 



#### 怎么用财务数据进行选股？ 

你会怎么选?首先它是一家赚钱的公司，这是首要条件，其次你会希望这家公司会便宜一点，这已经是一个选股思路，先找赚钱的公司，赚钱的公司肯定和现金和利润相关。

1. 赚钱的公司肯定和现金和利润相关。
   - ![image-20220424214006776](%E7%AC%94%E8%AE%B0.assets/image-20220424214006776.png)
   - 净利润，纯的到手上的钱有多少，现金流量表，实际账户上的钱有多少，你要知道理论上的利润，不代表实际的利润。比如一家公司买了100万的货，预付了20万，还有80万没到手，虽然利润上有，但不代表我真正赚到了。现金流和净利润的区别：现金流表示我真正拿到手的，利润表示应该拿到手的。
   - 例如五粮液的营业收入，表示卖酒的收益，不代表做房产啥的收益。
     - ![image-20220424215054907](%E7%AC%94%E8%AE%B0.assets/image-20220424215054907.png)
2. 市盈率：股价/企业的利润 = 总市值/归属于母公司股东净利润的总和，就是市场给的价格和公司实际盈利的一个比值，
   - 市盈率
     - ![image-20220424215211989](%E7%AC%94%E8%AE%B0.assets/image-20220424215211989.png)
     - 
       - ![image-20220424215446177](%E7%AC%94%E8%AE%B0.assets/image-20220424215446177.png)
       - ![image-20220424215502002](%E7%AC%94%E8%AE%B0.assets/image-20220424215502002.png)
3. 如果你发现一家公司很赚钱，但是市盈率挺低的，或者说这家公司的股价现在还是挺便宜的。那其实就要赶紧买入了，因为代表着这家公司处于低估值，也就是现在的价格因为一些消息、一些各种原因比较低，那么你就应该把握好机会，这个概念就是巴菲特所说的价值投资，就是捡便宜的东西去买入。
4. 总结
   - 这些数据基本去财经网站上都能找到。
     - ![image-20220424215947607](%E7%AC%94%E8%AE%B0.assets/image-20220424215947607.png)



### 如何构建一个量化交易系统

#### 量化交易系统的组成

1. 你可以把量化交易系统想象成一个电脑
   - ![image-20220424220256285](%E7%AC%94%E8%AE%B0.assets/image-20220424220256285.png)
2. 一个交易平台的界面，猜想一下它包含哪些组件，模块。可视化的组件
   - 可视化、行情、交易策略、柜台这四大块组成，数据端、决策端、执行端 
     - ![image-20220424220451006](%E7%AC%94%E8%AE%B0.assets/image-20220424220451006.png)
     - ![image-20220424220532714](%E7%AC%94%E8%AE%B0.assets/image-20220424220532714.png)



#### 使用Python实现量化交易

1. 分为四块，Data就是我们的行情，跟股票相关的行情主要分为两块，一个是指数（上证500，沪深300等，相当于把一堆股票做一个整合，），一个是个股（茅台、五粮液）。指数又分为3个，持仓个股就是我持有哪些股票，行情数据就是每日的价格、成交数据，资金流数据：从海外市场通过港股通，香港交易所、上海或者深圳交易所叫北向资金。
   - 最重要的三大块，Data-Strategy-Trade,Chart是辅助模块。
     - ![image-20220424220810530](%E7%AC%94%E8%AE%B0.assets/image-20220424220810530.png)
2. 总结
   - ![image-20220424221703374](%E7%AC%94%E8%AE%B0.assets/image-20220424221703374.png)





### 章节总结

1. 什么是量化
   - ![image-20220424221808102](%E7%AC%94%E8%AE%B0.assets/image-20220424221808102.png)
2. 常用的股票量化指标
   - ![image-20220424221846649](%E7%AC%94%E8%AE%B0.assets/image-20220424221846649.png)
3. 量化交易的发展史
   - ![image-20220424221947128](%E7%AC%94%E8%AE%B0.assets/image-20220424221947128.png)
4. 量化系统的组成
   - ![image-20220424222012579](%E7%AC%94%E8%AE%B0.assets/image-20220424222012579.png)
5. 股票量化交易，就是将与股票相关的信息数据化、策略化并且通过历史数据验证他们的交易逻辑性
6. 



## 获取股票数据

### 什么是股票

1. 股票的由来
   - ![image-20220424223644067](%E7%AC%94%E8%AE%B0.assets/image-20220424223644067.png)
   - ![image-20220424223658686](%E7%AC%94%E8%AE%B0.assets/image-20220424223658686.png)
   - 
2. 股票的特性
   - ![image-20220424223741576](%E7%AC%94%E8%AE%B0.assets/image-20220424223741576.png)
3. 总结
   - ![image-20220424223810557](%E7%AC%94%E8%AE%B0.assets/image-20220424223810557.png)
4. 

### 使用JQData获取行情数据

#### 如何获取股票数据

1. 先学习第三种方式，其他方式需要自己去挖掘把。 
   - [JQData官网](https://www.joinquant.com/)
     - ![image-20220424223903174](%E7%AC%94%E8%AE%B0.assets/image-20220424223903174.png)
2. 数据字典
   - ![image-20220424224035448](%E7%AC%94%E8%AE%B0.assets/image-20220424224035448.png)
3. 可以先查看官网上的数据字典或者本地数据，发现有哪些数据可以供自己调用
   - 点击数据字典，这个数据字典就是阐明有哪些数据可以供自己调用，我们这节课主要用的是股票数据
     - ![image-20220424224528858](%E7%AC%94%E8%AE%B0.assets/image-20220424224528858.png)
     - ![image-20220424224640431](%E7%AC%94%E8%AE%B0.assets/image-20220424224640431.png)
   - 或者本地数据的Python版Api，或者其他编程语言API,因为我们现在用的是Python，所以先看这个
     - ![image-20220424224820896](%E7%AC%94%E8%AE%B0.assets/image-20220424224820896.png)
       - 想要什么数据，直接Ctrl+F 搜就行
         - ![image-20220424224948895](%E7%AC%94%E8%AE%B0.assets/image-20220424224948895.png)
   - 
4. 



#### 



 



















